/*! For license information please see gerber-to-svg.min.js.LICENSE.txt */
var gerberToSvg=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=25)}([function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,f=[],l=!1,h=-1;function c(){l&&u&&(l=!1,u.length?f=u.concat(f):h=-1,f.length&&p())}function p(){if(!l){var t=s(c);l=!0;for(var e=f.length;e;){for(u=f,f=[];++h<e;)u&&u[h].run();h=-1,e=f.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new d(t,e)),1!==f.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";var n={};function i(t,e,r){r||(r=Error);var i=function(t){var r,n;function i(r,n,i){return t.call(this,function(t,r,n){return"string"==typeof e?e:e(t,r,n)}(r,n,i))||this}return n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=t,n[t]=i}function o(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i,a,s;if("string"==typeof e&&(i="not ",e.substr(!a||a<0?0:+a,i.length)===i)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))s="The ".concat(t," ").concat(n," ").concat(o(e,"type"));else{var u=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(u," ").concat(n," ").concat(o(e,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},function(t,e,r){"use strict";(function(e){var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=f;var i=r(13),o=r(18);r(1)(f,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var u=a[s];f.prototype[u]||(f.prototype[u]=o.prototype[u])}function f(t){if(!(this instanceof f))return new f(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||e.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,r(2))},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e,n="object"==typeof self&&self&&self.Object===Object&&self,i=(r||n||Function("return this")()).isFinite;t.exports=function(t){return"number"==typeof t&&i(t)}}).call(this,r(0))},function(t,e,r){"use strict";(function(t){var n=r(30),i=r(31),o=r(32);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return f(this,t,e,r)}function f(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=c(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=s(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):c(t,e);if("Buffer"===e.type&&o(e.data))return c(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function c(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(n)return Y(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return R(this,e,r);case"ascii":return M(this,e,r);case"latin1":case"binary":return T(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function b(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function f(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=r;o<s;o++)if(f(t,o)===f(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var h=!0,c=0;c<u;c++)if(f(t,o+c)!==f(e,c)){h=!1;break}if(h)return o}return-1}function m(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function _(t,e,r,n){return F(Y(e,t.length-r),t,r,n)}function w(t,e,r,n){return F(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return w(t,e,r,n)}function E(t,e,r,n){return F(z(e),t,r,n)}function k(t,e,r,n){return F(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function R(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,f=t[i],l=null,h=f>239?4:f>223?3:f>191?2:1;if(i+h<=r)switch(h){case 1:f<128&&(l=f);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&f)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&f)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&f)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return f(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return l(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?R(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),f=this.slice(n,i),l=t.slice(e,r),h=0;h<s;++h)if(f[h]!==l[h]){o=f[h],a=l[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return b(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return b(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return m(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function A(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=U(t[o]);return i}function O(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function j(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function C(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function N(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(t,e,r,n,o){return o||N(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function B(t,e,r,n,o){return o||N(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):C(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):C(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return I(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return I(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return B(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return B(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=u.isBuffer(t)?t:Y(new u(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(0))},function(t,e,r){"use strict";var n=function(t){return Math.round(1e10*t)/1e7},i=function(t,e,r){return r("rect",{x:n(t[0]),y:n(t[1]),width:n(t[2]-t[0]),height:n(t[3]-t[1]),fill:e})};t.exports={shift:n,maskLayer:function(t,e,r){return r("g",{mask:"url(#"+t+")"},e)},createMask:function(t,e,r,n){return n("mask",{id:t,fill:"#000",stroke:"#000"},[n("g",{},r=[i(e,"#fff",n)].concat(r))])}}},function(t,e,r){"use strict";var n=r(29).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=f,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=c,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function l(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function c(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=a(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){(e=t.exports=r(13)).Stream=e,e.Readable=e,e.Writable=r(18),e.Duplex=r(4),e.Transform=r(19),e.PassThrough=r(39),e.finished=r(10),e.pipeline=r(40)},function(t,e,r){"use strict";var n=r(3).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,r,o){if("function"==typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&e.readable,s=r.writable||!1!==r.writable&&e.writable,u=function(){e.writable||l()},f=e._writableState&&e._writableState.finished,l=function(){s=!1,f=!0,a||o.call(e)},h=e._readableState&&e._readableState.endEmitted,c=function(){a=!1,h=!0,s||o.call(e)},p=function(t){o.call(e,t)},d=function(){var t;return a&&!h?(e._readableState&&e._readableState.ended||(t=new n),o.call(e,t)):s&&!f?(e._writableState&&e._writableState.ended||(t=new n),o.call(e,t)):void 0},g=function(){e.req.on("finish",l)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?s&&!e._writableState&&(e.on("end",u),e.on("close",u)):(e.on("complete",l),e.on("abort",d),e.req?g():e.on("request",g)),e.on("end",c),e.on("finish",l),!1!==r.error&&e.on("error",p),e.on("close",d),function(){e.removeListener("complete",l),e.removeListener("abort",d),e.removeListener("request",g),e.req&&e.req.removeListener("finish",l),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("end",c),e.removeListener("error",p),e.removeListener("close",d)}}},function(t,e,r){"use strict";var n=r(5),i=r(44),o=r(45);t.exports=function(t,e){if(null==t)return NaN;var r=""+t,a="+";if("-"!==r[0]&&"+"!==r[0]||(a=r[0],r=r.slice(1)),-1!==r.indexOf(".")||null==e||null==e.zero)return Number(a+r);if(null==e.places||2!==e.places.length)return NaN;var s=e.places[0],u=e.places[1];if(!n(s)||!n(u))return NaN;if("T"===e.zero)r=o(r,s+u,"0");else{if("L"!==e.zero)return NaN;r=i(r,s+u,"0")}var f=r.slice(0,s),l=r.slice(s,s+u);return Number(a+f+"."+l)}},function(t,e,r){"use strict";var n=function(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[2],e[2]),Math.max(t[3],e[3])]},i=function(t,e){var r=e[0],n=e[1];return[t[0]+r,t[1]+n,t[2]+r,t[3]+n]};t.exports={new:function(){return[1/0,1/0,-1/0,-1/0]},add:n,addPoint:function(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[2],e[0]),Math.max(t[3],e[1])]},addCircle:function(t,e,r,n){return[Math.min(t[0],r-e),Math.min(t[1],n-e),Math.max(t[2],r+e),Math.max(t[3],n+e)]},translate:i,repeat:function(t,e){return n(t,i(t,e))}}},function(t,e,r){"use strict";(function(e,n){var i;t.exports=S,S.ReadableState=k;r(14).EventEmitter;var o=function(t,e){return t.listeners(e).length},a=r(15),s=r(6).Buffer,u=(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var f,l=r(33);f=l&&l.debuglog?l.debuglog("stream"):function(){};var h,c,p,d=r(34),g=r(16),y=r(17).getHighWaterMark,b=r(3).codes,v=b.ERR_INVALID_ARG_TYPE,m=b.ERR_STREAM_PUSH_AFTER_EOF,_=b.ERR_METHOD_NOT_IMPLEMENTED,w=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(1)(S,a);var x=g.errorOrDestroy,E=["error","close","destroy","pause","resume"];function k(t,e,n){i=i||r(4),t=t||{},"boolean"!=typeof n&&(n=e instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",n),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=r(8).StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function S(t){if(i=i||r(4),!(this instanceof S))return new S(t);var e=this instanceof i;this._readableState=new k(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function R(t,e,r,n,i){f("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(f("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?A(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,O(t)))}(t,a);else if(i||(o=function(t,e){var r;n=e,s.isBuffer(n)||n instanceof u||"string"==typeof e||void 0===e||t.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],e));var n;return r}(a,e)),o)x(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),n)a.endEmitted?x(t,new w):M(t,a,e,!0);else if(a.ended)x(t,new m);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?M(t,a,e,!1):L(t,a)):M(t,a,e,!1)}else n||(a.reading=!1,L(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function M(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&A(t)),L(t,e)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),S.prototype.destroy=g.destroy,S.prototype._undestroy=g.undestroy,S.prototype._destroy=function(t,e){e(t)},S.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=s.from(t,e),e=""),r=!0),R(this,t,e,!1,r)},S.prototype.unshift=function(t){return R(this,t,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){h||(h=r(8).StringDecoder);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function T(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function A(t){var e=t._readableState;f("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(O,t))}function O(t){var e=t._readableState;f("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,I(t)}function L(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(P,t,e))}function P(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(f("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function j(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function C(t){f("readable nexttick read 0"),t.read(0)}function N(t,e){f("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),I(t),e.flowing&&!e.reading&&t.read(0)}function I(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function B(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function D(t){var e=t._readableState;f("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(U,e,t))}function U(t,e){if(f("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function Y(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}S.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):A(this),null;if(0===(t=T(t,e))&&e.ended)return 0===e.length&&D(this),null;var n,i=e.needReadable;return f("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",i=!0),e.ended||e.reading?f("reading or ended",i=!1):i&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=T(r,e))),null===(n=t>0?B(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&D(this)),null!==n&&this.emit("data",n),n},S.prototype._read=function(t){x(this,new _("_read()"))},S.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,f("pipe count=%d opts=%j",i.pipesCount,e);var a=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?u:y;function s(e,n){f("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),t.removeListener("close",d),t.removeListener("finish",g),t.removeListener("drain",l),t.removeListener("error",p),t.removeListener("unpipe",s),r.removeListener("end",u),r.removeListener("end",y),r.removeListener("data",c),h=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}function u(){f("onend"),t.end()}i.endEmitted?n.nextTick(a):r.once("end",a),t.on("unpipe",s);var l=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,I(t))}}(r);t.on("drain",l);var h=!1;function c(e){f("ondata");var n=t.write(e);f("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==Y(i.pipes,t))&&!h&&(f("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function p(e){f("onerror",e),y(),t.removeListener("error",p),0===o(t,"error")&&x(t,e)}function d(){t.removeListener("finish",g),y()}function g(){f("onfinish"),t.removeListener("close",d),y()}function y(){f("unpipe"),r.unpipe(t)}return r.on("data",c),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",p),t.once("close",d),t.once("finish",g),t.emit("pipe",r),i.flowing||(f("pipe resume"),r.resume()),t},S.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=Y(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},S.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,f("on readable",i.length,i.reading),i.length?A(this):i.reading||n.nextTick(C,this))),r},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(t,e){var r=a.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick(j,this),r},S.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||n.nextTick(j,this),e},S.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(N,t,e))}(this,t)),t.paused=!1,this},S.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(f("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(f("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<E.length;o++)t.on(E[o],this.emit.bind(this,E[o]));return this._read=function(e){f("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===c&&(c=r(37)),c(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),S._fromList=B,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,e){return void 0===p&&(p=r(38)),p(S,t,e)})}).call(this,r(0),r(2))},function(t,e,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}b(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&b(t,"error",e,r)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function f(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,o,a,s;if(f(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if("function"==typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=c.bind(n);return i.listener=r,n.wrapFn=i,i}function d(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):y(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function b(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var f=u.length,l=y(u,f);for(r=0;r<f;++r)o(l[r],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return f(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return f(e),this.prependListener(t,p(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,n,i,o,a;if(f(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,r){t.exports=r(14).EventEmitter},function(t,e,r){"use strict";(function(e){function r(t,e){i(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(n,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):o?(e.nextTick(n,a),o(t)):e.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,r(2))},function(t,e,r){"use strict";var n=r(3).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,i){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},function(t,e,r){"use strict";(function(e,n){function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=S,S.WritableState=k;var a={deprecate:r(36)},s=r(15),u=r(6).Buffer,f=(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,h=r(16),c=r(17).getHighWaterMark,p=r(3).codes,d=p.ERR_INVALID_ARG_TYPE,g=p.ERR_METHOD_NOT_IMPLEMENTED,y=p.ERR_MULTIPLE_CALLBACK,b=p.ERR_STREAM_CANNOT_PIPE,v=p.ERR_STREAM_DESTROYED,m=p.ERR_STREAM_NULL_VALUES,_=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,x=h.errorOrDestroy;function E(){}function k(t,e,a){o=o||r(4),t=t||{},"boolean"!=typeof a&&(a=e instanceof o),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=c(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new y;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,i,o){--e.pendingcb,r?(n.nextTick(o,i),n.nextTick(L,t,e),t._writableState.errorEmitted=!0,x(t,i)):(o(i),t._writableState.errorEmitted=!0,x(t,i),L(t,e))}(t,r,i,e,o);else{var a=A(r)||t.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||T(t,r),i?n.nextTick(M,t,r,a,o):M(t,r,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function S(t){var e=this instanceof(o=o||r(4));if(!e&&!l.call(S,this))return new S(t);this._writableState=new k(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function R(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function M(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),L(t,e)}function T(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,o=new Array(n),a=e.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,R(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var f=r.chunk,l=r.encoding,h=r.callback;if(R(t,e,!1,e.objectMode?1:f.length,f,l,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function A(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final((function(r){e.pendingcb--,r&&x(t,r),e.prefinished=!0,t.emit("prefinish"),L(t,e)}))}function L(t,e){var r=A(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(O,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}r(1)(S,s),k.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(k.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===S&&(t&&t._writableState instanceof k)}})):l=function(t){return t instanceof this},S.prototype.pipe=function(){x(this,new b)},S.prototype.write=function(t,e,r){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=t,u.isBuffer(i)||i instanceof f);return s&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof r&&(r=E),o.ending?function(t,e){var r=new _;x(t,r),n.nextTick(e,r)}(this,r):(s||function(t,e,r,i){var o;return null===r?o=new m:"string"==typeof r||e.objectMode||(o=new d("chunk",["string","Buffer"],r)),!o||(x(t,o),n.nextTick(i,o),!1)}(this,o,t,r))&&(o.pendingcb++,a=function(t,e,r,n,i,o){if(!r){var a=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,r));return e}(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var f=e.length<e.highWaterMark;f||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else R(t,e,!1,s,n,i,o);return f}(this,o,s,t,e,r)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||T(this,t))},S.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(t,e,r){r(new g("_write()"))},S.prototype._writev=null,S.prototype.end=function(t,e,r){var i=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,r){e.ending=!0,L(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,i,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),S.prototype.destroy=h.destroy,S.prototype._undestroy=h.undestroy,S.prototype._destroy=function(t,e){e(t)}}).call(this,r(0),r(2))},function(t,e,r){"use strict";t.exports=l;var n=r(3).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(4);function f(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);u.call(this,t),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush((function(e,r){c(t,e,r)}))}function c(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}r(1)(l,u),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,r){r(new i("_transform()"))},l.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,r){"use strict";var n={set:function(t,e,r){return{type:"set",line:r||-1,prop:t,value:e}},done:function(t){return{type:"done",line:t||-1}},level:function(t,e,r){return{type:"level",line:r||-1,level:t,value:e}},tool:function(t,e,r){return{type:"tool",line:r||-1,code:t,tool:e}},op:function(t,e,r){return{type:"op",line:r||-1,op:t,coord:e}},macro:function(t,e,r){return{type:"macro",line:r||-1,name:t,blocks:e}}};t.exports=n},function(t,e,r){"use strict";var n=r(11),i=/[XY]0\d+/,o=/[XY]\d+0(?=\D|$)/,a=[{coord:"x",test:/X([+-]?[\d.]+)/},{coord:"y",test:/Y([+-]?[\d.]+)/},{coord:"i",test:/I([+-]?[\d.]+)/},{coord:"j",test:/J([+-]?[\d.]+)/},{coord:"a",test:/A([\d.]+)/}];t.exports={parse:function(t,e){if(null==t)return{};if(null==e.zero||null==e.places)throw new Error("cannot parse coordinate with format undefined");return a.reduce((function(r,i){var o=t.match(i.test);return o&&(r[i.coord]=n(o[1],e)),r}),{})},detectZero:function(t){return o.test(t)?"L":i.test(t)?"T":null}}},function(t,e,r){"use strict";t.exports={DRILL:"5",MOVE:"0",LINEAR:"1",CW_ARC:"2",CCW_ARC:"3"}},function(t,e,r){"use strict";var n=r(58);t.exports=function(t,e,r){return e=e||{},r=r||[],"<"+n(t)+Object.keys(e).reduce((function(t,r){var i=e[r];return t+(null!=i?" "+n(r)+'="'+n(i)+'"':"")}),"")+(r.length?">"+r.join("")+"</"+t+">":"/>")}},function(t,e,r){"use strict";var n=r(23);t.exports=function(t,e,r){var i=r||n,o={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"0","fill-rule":"evenodd",width:t.width+t.units,height:t.height+t.units,viewBox:t.viewBox.join(" ")};"string"==typeof e&&(e={id:e}),Object.keys(e||{}).forEach((function(t){var r=e[t];null!=r&&(o[t]=r)}));var a=[];if(t.layer.length){t.defs.length&&a.push(i("defs",{},t.defs));var s="translate(0,"+(t.viewBox[3]+2*t.viewBox[1])+") scale(1,-1)";a.push(i("g",{transform:s,fill:"currentColor",stroke:"currentColor"},t.layer))}return i("svg",o,a)}},function(t,e,r){"use strict";(function(e){var n=r(26),i=r(27),o=r(50),a=r(23),s=r(59),u=r(24),f=r(63);t.exports=function(t,r,u){"function"==typeof r&&(u=r,r=null);var f,l=("string"==typeof(f=r)?f={id:f}:f||(f={}),{id:n.ensure(f.id),attributes:f.attributes||{},createElement:f.createElement||a,objectMode:null!=f.objectMode&&f.objectMode,parser:{places:f.places,zero:f.zero,filetype:f.filetype},plotter:{units:f.units,backupUnits:f.backupUnits,nota:f.nota,backupNota:f.backupNota,optimizePaths:f.optimizePaths,plotAsOutline:f.plotAsOutline}}),h=null!=u,c=new s(l.id,l.attributes,l.createElement,l.objectMode),p=i(l.parser),d=o(l.plotter);if(c.parser=p,c.plotter=d,p.on("warning",(function(t){c.emit("warning",t)})),d.on("warning",(function(t){c.emit("warning",t)})),p.once("error",(function(t){c.emit("error",t)})),d.once("error",(function(t){c.emit("error",t)})),p.once("end",(function(){c.filetype=p.format.filetype})),t.pipe?(t.setEncoding("utf8"),t.pipe(p)):e.nextTick((function(){p.write(t),p.end()})),p.pipe(d).pipe(c),h){var g="",y=function(){return u(null,g)};c.on("readable",(function(){var t;do{t=c.read()||"",g+=t}while(t)})),c.once("end",y),c.once("error",(function(t){return c.removeListener("end",y),u(t)}))}return c},t.exports.render=u,t.exports.clone=f}).call(this,r(2))},function(t,e,r){"use strict";var n="_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",i="-0123456789"+n,o=new RegExp("^[^"+n+"]|[^\\"+i+"]","g");function a(t){return t=t||12,u(1,n)+u(t-1,i)}function s(t){return t.replace(o,"_")}function u(t,e){for(var r=e.length,n="";t>0;)t--,n+=e[Math.floor(Math.random()*r)];return n}t.exports={random:a,sanitize:s,ensure:function(t,e){return"string"==typeof t?s(t):a(e)}}},function(t,e,r){"use strict";var n=r(5),i=r(28);t.exports=function(t){var e=(t=t||{}).places?function(t){if(Array.isArray(t)&&2===t.length&&n(t[0])&&n(t[1]))return t;throw new Error("places must be an array of two whole numbers")}(t.places):null,r=t.zero?function(t){if("T"===t||"L"===t)return t;throw new Error("zero suppression must be 'L' or 'T'")}(t.zero):null,o=t.filetype?function(t){if("gerber"===t||"drill"===t)return t;throw new Error('filetype must be "drill" or "gerber"')}(t.filetype):null;return new i(e,r,o)}},function(t,e,r){"use strict";var n=r(8).StringDecoder,i=r(1),o=r(9).Transform,a=r(41),s=r(42),u=r(43),f=r(48),l=r(49),h=r(22),c=function(t,e,r){o.call(this,{readableObjectMode:!0}),this._decoder=new n("utf8"),this._stash="",this._index=0,this._drillMode=h.DRILL,this._drillStash=[],this._syncResult=null,this.line=0,this.format={places:t,zero:e,filetype:r}};i(c,o),c.prototype._process=function(t,e){for(;this._index<t.length;){var r=s(e,t,this._index);this._index+=r.read,this.line+=r.lines,this._stash+=r.rem,r.block&&("gerber"===e?u(this,r.block):f.parse(this,r.block))}},c.prototype._transform=function(t,e,r){var n=this.format.filetype;if(t=this._decoder.write(t),!n){if(n=a(t,this._index,65535),this._index+=t.length,!n)return this._index>=65535?r(new Error("unable to determine filetype")):(this._stash+=t,r());this.format.filetype=n,this._index=0}t=this._stash+t,this._stash="",this._process(t,n),this._index=0,r()},c.prototype._flush=function(t){return"drill"===this.format.filetype&&f.flush(this),t&&t()},c.prototype._push=function(t){-1===t.line&&(t.line=this.line),(this._syncResult?this._syncResult:this).push(t)},c.prototype._warn=function(t){this.emit("warning",l(t,this.line))},c.prototype.parseSync=function(t){var e=a(t,this._index,6553500);return this.format.filetype=e,this._syncResult=[],this._process(t,e),this._flush(),this._syncResult},t.exports=c},function(t,e,r){var n=r(6),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),o(i,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";e.byteLength=function(t){var e=f(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=f(t),a=n[0],s=n[1],u=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,s)),l=0,h=s>0?a-4:a;for(r=0;r<h;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function f(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,f=u>>1,l=-7,h=r?i-1:0,c=r?-1:1,p=t[e+h];for(h+=c,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=c,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+h],h+=c,l-=8);if(0===o)o=1-f;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=f}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,f=8*o-i-1,l=(1<<f)-1,h=l>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?c/u:c*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,f+=i;f>0;t[r+p]=255&a,p+=d,a/=256,f-=8);t[r+p-d]|=128*g}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){},function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var u=r(6).Buffer,f=r(35).inspect,l=f&&f.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r,n;return e=t,(r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return u.alloc(0);for(var e,r,n,i=u.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,r=i,n=a,u.prototype.copy.call(e,r,n),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),0==(t-=o)){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=u.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,e}},{key:l,value:function(t,e){return f(this,i(i({},e),{},{depth:0,customInspect:!1}))}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e){},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,r(0))},function(t,e,r){"use strict";(function(e){var n;function i(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r(10),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),f=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),c=Symbol("stream");function p(t,e){return{value:t,done:e}}function d(t){var e=t[a];if(null!==e){var r=t[c].read();null!==r&&(t[l]=null,t[a]=null,t[s]=null,e(p(r,!1)))}}function g(t){e.nextTick(d,t)}var y=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(n={get stream(){return this[c]},next:function(){var t=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[f])return Promise.resolve(p(void 0,!0));if(this[c].destroyed)return new Promise((function(r,n){e.nextTick((function(){t[u]?n(t[u]):r(p(void 0,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(t,e){return function(r,n){t.then((function(){e[f]?r(p(void 0,!0)):e[h](r,n)}),n)}}(i,this));else{var o=this[c].read();if(null!==o)return Promise.resolve(p(o,!1));n=new Promise(this[h])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var t=this;return new Promise((function(e,r){t[c].destroy(null,(function(t){t?r(t):e(p(void 0,!0))}))}))})),n),y);t.exports=function(t){var e,r=Object.create(b,(i(e={},c,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,u,{value:null,writable:!0}),i(e,f,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var n=r[c].read();n?(r[l]=null,r[a]=null,r[s]=null,t(p(n,!1))):(r[a]=t,r[s]=e)},writable:!0}),e));return r[l]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[s];return null!==e&&(r[l]=null,r[a]=null,r[s]=null,e(t)),void(r[u]=t)}var n=r[a];null!==n&&(r[l]=null,r[a]=null,r[s]=null,n(p(void 0,!0))),r[f]=!0})),t.on("readable",g.bind(null,r)),r}}).call(this,r(2))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,r){"use strict";t.exports=i;var n=r(19);function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r(1)(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){"use strict";var n;var i=r(3).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===n&&(n=r(10)),n(t,{readable:e,writable:i},(function(t){if(t)return o(t);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function f(t){t()}function l(t,e){return t.pipe(e)}function h(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,r){var o=r<e.length-1;return u(t,o,r>0,(function(t){n||(n=t),t&&a.forEach(f),o||(a.forEach(f),i(n))}))}));return e.reduce(l)}},function(t,e,r){"use strict";t.exports=function(t,e,r){for(var n=Math.min(r-e,t.length),i=[],o=null,a=-1;!o&&++a<n;){var s=t[a];"\n"===s?i.length+a&&(o="drill",i=[]):(i.push(s),"*"===s&&";"!==i[0]&&(o="gerber",i=[]))}return o}},function(t,e,r){"use strict";t.exports=function(t,e,r){if("gerber"!==t&&"drill"!==t)throw new Error('filetype to get next block must be "drill" or "gerber"');for(var n=e.length-r,i="gerber"===t?"*":"\n",o="gerber"===t?"%":"",a=!1,s=!1,u=!1,f=!1,l=[],h=0,c=0;!f&&h<n;){var p=e[r+h];"\n"===p&&c++,p===o?s?(u=!0,l.pop()):(s=!0,l.push(p)):p===i?(a=!0,s&&l.push(p)):p>=" "&&p<="~"&&l.push(p),h++,f=a&&(!s||u)}return{lines:c,read:h,block:f?l.join("").trim():"",rem:f?"":l.join("")}}},function(t,e,r){"use strict";var n=r(20),i=r(11),o=r(21),a=r(46),s=/^G0*([123])/,u=/^G3([67])/,f=/^G7([45])/,l=/^G7([01])/,h=/^G9([01])/,c=/^G0*4/,p=/^%TO[^%*]*/,d=/^(?:G54)?D0*([1-9]\d+)/,g=/D0*([123])$/,y=/^(?:G0*[123])?((?:[XYIJ][+-]?\d+){1,4})(?:D0*[123])?$/,b=/^%MO(IN|MM)/,v=/^%FS([LT]?)([AI]?)(.*)X([0-7])([0-7])Y\4\5/,m=/^%LP([CD])/,_=/^%SR(?:X(\d+)Y(\d+)I([\d.]+)J([\d.]+))?/,w=/^%ADD0*(\d{2,})([A-Za-z_$][\w\-.]*)(?:,((?:X?[\d.-]+)*))?/,x=/^%AM([A-Za-z_$][\w\-.]*)\*?(.*)/,E=/\*MO(IN|MM)$/,k=function(t,e){var r="IN"===e?"in":"mm";return t._push(n.set("units",r))};t.exports=function(t,e){if(!c.test(e)&&!p.test(e)){if("M02"===e)return t._push(n.done());if(u.test(e)){var r="6"===e.match(u)[1];return t._push(n.set("region",r))}if(f.test(e)){var S="4"===e.match(f)[1]?"s":"m";return t._push(n.set("arc",S))}if(b.test(e)){var R=e.match(b)[1];return k(t,R)}if(l.test(e)){var M="0"===e.match(l)[1]?"in":"mm";return t._push(n.set("backupUnits",M))}if(v.test(e)){var T=e.match(v),A=T[1],O=T[2],L=T[3],P=Number(T[4]),j=Number(T[5]),C=t.format;C.zero=C.zero||A,C.places||(C.places=[P,j]),C.zero?"T"===C.zero&&t._warn("trailing zero suppression has been deprecated"):(C.zero="L",t._warn("zero suppression missing from format; assuming leading")),L&&t._warn('unknown characters "'+L+'" in "'+e+'" were ignored');var N=1.5*Math.pow(10,-C.places[1]);if(t._push(n.set("nota",O)),t._push(n.set("epsilon",N)),E.test(e)){var I=e.match(E)[1];k(t,I)}}else{if(h.test(e)){var B="0"===e.match(h)[1]?"A":"I";return t._push(n.set("backupNota",B))}if(m.test(e)){var D=e.match(m)[1];return t._push(n.level("polarity",D))}if(_.test(e)){var U=e.match(_),Y=U[1]||1,z=U[2]||1,F=U[3]||0,q=U[4]||0,W={x:Number(Y),y:Number(z),i:Number(F),j:Number(q)};return t._push(n.level("stepRep",W))}if(d.test(e)){var G=e.match(d)[1];return t._push(n.set("tool",G))}if(w.test(e))return function(t,e){var r,o,a,s={places:t.format.places},u=e.match(w),f=u[1],l=u[2],h=u[3]?u[3].split("X"):[];"C"===l?(r="circle",o=3):"R"===l?(r="rect",o=4):"O"===l?(r="obround",o=4):"P"===l?(r="poly",o=5):(r=l,o=0),"circle"===r?a=[i(h[0],s)]:"rect"===r||"obround"===r?a=[i(h[0],s),i(h[1],s)]:"poly"===r?(a=[i(h[0],s),Number(h[1]),0],h[2]&&(a[2]=Number(h[2]))):a=h.map(Number);var c=[];h[o-1]?c=[i(h[o-2],s),i(h[o-1],s)]:h[o-2]&&(c=[i(h[o-2],s)]);var p={shape:r,params:a,hole:c};return t._push(n.tool(f,p))}(t,e);if(x.test(e))return function(t,e){var r=e.match(x),i=r[1];i.match(/-/)&&t._warn("hyphens in macro name are illegal: "+i);var o=(r[2].length?r[2].split("*"):[]).filter(Boolean).map((function(e){return a(t,e)}));return t._push(n.macro(i,o))}(t,e);if(!(g.test(e)||s.test(e)||y.test(e)))return t._warn('block "'+e+'" was not recognized and was ignored');var H,$=e.match(g),V=e.match(s),X=e.match(y);if(V&&(H="1"===V[1]?"i":"2"===V[1]?"cw":"ccw",t._push(n.set("mode",H))),$||X){var K=$?$[1]:"",Z=X?X[1]:"",J=o.parse(Z,t.format),Q="last";"1"===K?Q="int":"2"===K?Q="move":"3"===K&&(Q="flash"),t._push(n.op(Q,J))}}}}},function(t,e,r){(function(e){var r,n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s="[\\ud800-\\udfff]",u="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",f="\\ud83c[\\udffb-\\udfff]",l="[^\\ud800-\\udfff]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",p="(?:"+u+"|"+f+")"+"?",d="[\\ufe0e\\ufe0f]?"+p+("(?:\\u200d(?:"+[l,h,c].join("|")+")[\\ufe0e\\ufe0f]?"+p+")*"),g="(?:"+[l+u+"?",u,h,c,s].join("|")+")",y=RegExp(f+"(?="+f+")|"+g+d,"g"),b=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),v=parseInt,m="object"==typeof e&&e&&e.Object===Object&&e,_="object"==typeof self&&self&&self.Object===Object&&self,w=m||_||Function("return this")(),x=(r="length",function(t){return null==t?void 0:t[r]});function E(t){return b.test(t)}function k(t){return E(t)?function(t){var e=y.lastIndex=0;for(;y.test(t);)e++;return e}(t):x(t)}function S(t){return E(t)?function(t){return t.match(y)||[]}(t):function(t){return t.split("")}(t)}var R=Object.prototype.toString,M=w.Symbol,T=Math.ceil,A=Math.floor,O=M?M.prototype:void 0,L=O?O.toString:void 0;function P(t,e){var r="";if(!t||e<1||e>9007199254740991)return r;do{e%2&&(r+=t),(e=A(e/2))&&(t+=t)}while(e);return r}function j(t){if("string"==typeof t)return t;if(I(t))return L?L.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function C(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}(t,e,r)}function N(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function I(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==R.call(t)}function B(t){return t?(t=function(t){if("number"==typeof t)return t;if(I(t))return NaN;if(N(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=N(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var r=o.test(t);return r||a.test(t)?v(t.slice(2),r?2:8):i.test(t)?NaN:+t}(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}t.exports=function(t,e,r){var n;t=null==(n=t)?"":j(n);var i=(e=function(t){var e=B(t),r=e%1;return e==e?r?e-r:e:0}(e))?k(t):0;return e&&i<e?function(t,e){var r=(e=void 0===e?" ":j(e)).length;if(r<2)return r?P(e,t):e;var n=P(e,T(t/k(e)));return E(e)?C(S(n),0,t).join(""):n.slice(0,t)}(e-i,r)+t:t}}).call(this,r(0))},function(t,e,r){(function(e){var r,n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s="[\\ud800-\\udfff]",u="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",f="\\ud83c[\\udffb-\\udfff]",l="[^\\ud800-\\udfff]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",p="(?:"+u+"|"+f+")"+"?",d="[\\ufe0e\\ufe0f]?"+p+("(?:\\u200d(?:"+[l,h,c].join("|")+")[\\ufe0e\\ufe0f]?"+p+")*"),g="(?:"+[l+u+"?",u,h,c,s].join("|")+")",y=RegExp(f+"(?="+f+")|"+g+d,"g"),b=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),v=parseInt,m="object"==typeof e&&e&&e.Object===Object&&e,_="object"==typeof self&&self&&self.Object===Object&&self,w=m||_||Function("return this")(),x=(r="length",function(t){return null==t?void 0:t[r]});function E(t){return b.test(t)}function k(t){return E(t)?function(t){var e=y.lastIndex=0;for(;y.test(t);)e++;return e}(t):x(t)}function S(t){return E(t)?function(t){return t.match(y)||[]}(t):function(t){return t.split("")}(t)}var R=Object.prototype.toString,M=w.Symbol,T=Math.ceil,A=Math.floor,O=M?M.prototype:void 0,L=O?O.toString:void 0;function P(t,e){var r="";if(!t||e<1||e>9007199254740991)return r;do{e%2&&(r+=t),(e=A(e/2))&&(t+=t)}while(e);return r}function j(t){if("string"==typeof t)return t;if(I(t))return L?L.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function C(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}(t,e,r)}function N(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function I(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==R.call(t)}function B(t){return t?(t=function(t){if("number"==typeof t)return t;if(I(t))return NaN;if(N(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=N(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var r=o.test(t);return r||a.test(t)?v(t.slice(2),r?2:8):i.test(t)?NaN:+t}(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}t.exports=function(t,e,r){var n;t=null==(n=t)?"":j(n);var i=(e=function(t){var e=B(t),r=e%1;return e==e?r?e-r:e:0}(e))?k(t):0;return e&&i<e?t+function(t,e){var r=(e=void 0===e?" ":j(e)).length;if(r<2)return r?P(e,t):e;var n=P(e,T(t/k(e)));return E(e)?C(S(n),0,t).join(""):n.slice(0,t)}(e-i,r):t}}).call(this,r(0))},function(t,e,r){"use strict";var n=r(47),i=/^-?[\d.]+$/,o=/^(\$[\d+])=(.+)/;t.exports=function(t,e){if("0"===e[0])return{type:"comment"};if(o.test(e)){var r=e.match(o),a=r[1],s=r[2],u=n(t,s);return{type:"variable",set:function(t){return t[a]=u(t),t}}}var f=e.split(",").map((function(e){return i.test(e)?Number(e):n(t,e)})),l=f[0],h=f[1];return 1===l?{type:"circle",exp:h,dia:f[2],cx:f[3],cy:f[4],rot:f[5]||0}:(2===l&&t._warn("macro aperture vector primitives with code 2 are deprecated"),2===l||20===l?{type:"vect",exp:h,width:f[2],x1:f[3],y1:f[4],x2:f[5],y2:f[6],rot:f[7]}:21===l?{type:"rect",exp:h,width:f[2],height:f[3],cx:f[4],cy:f[5],rot:f[6]}:22===l?(t._warn("macro aperture lower-left rectangle primitives are deprecated"),{type:"rectLL",exp:h,width:f[2],height:f[3],x:f[4],y:f[5],rot:f[6]}):4===l?{type:"outline",exp:h,points:f.slice(3,-1),rot:f[f.length-1]}:5===l?{type:"poly",exp:h,vertices:f[2],cx:f[3],cy:f[4],dia:f[5],rot:f[6]}:6===l?{type:"moire",exp:1,cx:f[1],cy:f[2],dia:f[3],ringThx:f[4],ringGap:f[5],maxRings:f[6],crossThx:f[7],crossLen:f[8],rot:f[9]}:7===l?{type:"thermal",exp:1,cx:f[1],cy:f[2],outerDia:f[3],innerDia:f[4],gap:f[5],rot:f[6]}:void t._warn(l+" is an unrecognized primitive for a macro aperture"))}},function(t,e,r){"use strict";var n=/[$\d.]+/,i=new RegExp([/[+\-/xX()]/.source,n.source].join("|"),"g");t.exports=function(t,e){var r,o=e.match(i),a=function(){var t,e=o.shift();return n.test(e)?t={type:"n",val:e}:(t=r(),o.shift()),t},s=function(){var e=a(),r=o[0];for("X"===r&&(t._warn("multiplication in macros should use 'x', not 'X'"),r="x");"x"===r||"/"===r;){o.shift(),e={type:r,left:e,right:a()},r=o[0]}return e},u=(r=function(){for(var t=s(),e=o[0];"+"===e||"-"===e;){o.shift(),t={type:e,left:t,right:s()},e=o[0]}return t})(),f=function(t,e){var r,n=t.type;return"n"===n?"$"===(r=t.val)[0]?Number(e[r]):Number(r):"+"===n?f(t.left,e)+f(t.right,e):"-"===n?f(t.left,e)-f(t.right,e):"x"===n?f(t.left,e)*f(t.right,e):f(t.left,e)/f(t.right,e)};return function(t){return f(u,t)}}},function(t,e,r){"use strict";var n=r(5),i=r(20),o=r(22),a=r(11),s=r(21),u=/;FILE_FORMAT=(\d):(\d)/,f=/;TYPE=(PLATED|NON_PLATED)/,l=/;FORMAT={(.):(.)\/ (absolute|.+)? \/ (metric|inch) \/.+(trailing|leading|decimal|keep)/,h=/^(INCH|METRIC|M71|M72)/,c=/,([TL])Z/,p=/,(0{1,8})\.(0{1,8})/,d=/T0*(\d+)[\S]*C([\d.]+)/,g=/T0*(\d+)(?![\S]*C)/,y=/((?:[XYIJA][+-]?[\d.]+){1,4})(?:G85((?:[XY][+-]?[\d.]+){1,2}))?/,b=/^G0([01235])/,v=function(t,e,r){if(d.test(e)){var n=e.match(d),u=n[1],f={shape:"circle",params:[a(n[2])],hole:[]};return t._push(i.tool(u,f,r))}if(g.test(e)){var l=e.match(g)[1];t._push(i.set("tool",l,r))}return y.test(e)?(t.format.places||(t.format.places=[2,4],t._warn("places format missing; assuming [2, 4]")),t.format.zero||(t.format.zero="T",t._warn("zero suppression missing; assuming trailing suppression")),function(t,e,r){var n=e.match(y),a=s.parse(n[1],t.format);if(n[2])return t._push(i.op("move",a,r)),t._push(i.set("mode","i",r)),a=s.parse(n[2],t.format),t._push(i.op("int",a,r));switch(b.test(e)&&(t._drillMode=e.match(b)[1]),t._drillMode){case o.DRILL:return t._push(i.op("flash",a,r));case o.MOVE:return t._push(i.op("move",a,r));case o.LINEAR:return t._push(i.set("mode","i",r)),t._push(i.op("int",a,r));case o.CW_ARC:return t._push(i.set("mode","cw",r)),t._push(i.op("int",a,r));case o.CCW_ARC:return t._push(i.set("mode","ccw",r)),t._push(i.op("int",a,r))}}(t,e,r)):"M00"===e||"M30"===e?t._push(i.done(r)):"G90"===e?t._push(i.set("nota","A",r)):"G91"===e?t._push(i.set("nota","I",r)):h.test(e)?function(t,e,r){var n=e.match(h),o=e.match(c),a=e.match(p),s="METRIC"===n[1]||"M71"===n[1]?"mm":"in",u=o&&o[1];null==t.format.zero&&u&&(t.format.zero="T"===u?"L":"T"),null==t.format.places&&(t.format.places=a?[a[1].length,a[2].length]:"in"===s?[2,4]:[3,3]),t._push(i.set("units",s,r))}(t,e,r):void 0},m=function(t){t._drillStash.forEach((function(e){v(t,e.block,e.line)})),t._drillStash=[]};t.exports={parse:function(t,e){if(";"===e[0]){var r=function(t,e,r){var o={};if(l.test(e)){var a=e.match(l),s=Number(a[1]),h=Number(a[2]),c=a[3],p=a[4],d=a[5];n(s)&&n(h)&&(o.places=[s,h]),"absolute"===c?t._push(i.set("backupNota","A",r)):t._push(i.set("backupNota","I",r)),"metric"===p?t._push(i.set("backupUnits","mm",r)):t._push(i.set("backupUnits","in",r)),o.zero="leading"===d||"keep"===d?"L":"trailing"===d?"T":"D"}else if(u.test(e)){var g=e.match(u);o.places=[Number(g[1]),Number(g[2])]}else if(f.test(e)){var y="PLATED"===e.match(f)[1]?"pth":"npth";t._push(i.set("holePlating",y,r))}return o}(t,e,t.line);Object.keys(r).forEach((function(e){t.format[e]||(t.format[e]=r[e])}))}else t.format.zero?v(t,e,t.line):(t._drillStash.push({line:t.line,block:e}),y.test(e)&&(t.format.zero=s.detectZero(e),t.format.zero&&t._warn("zero suppression missing; detected "+("L"===t.format.zero?"leading":"trailing")+" suppression")),(t.format.zero||c.test(e)||t._drillStash.length>=1e3)&&m(t))},flush:m}},function(t,e,r){"use strict";t.exports=function(t,e){return{message:t,line:e}}},function(t,e,r){"use strict";var n=r(51),i=function(t){if("A"===t||"I"===t)return t;throw new Error('notation must be "in" or "mm"')},o=function(t){if("in"===t||"mm"===t)return t;throw new Error('units must be "in" or "mm"')};t.exports=function(t){var e=(t=t||{}).units?o(t.units):null,r=t.backupUnits?o(t.backupUnits):null,a=t.nota?i(t.nota):null,s=t.backupNota?i(t.backupNota):null;return new n(e,r,a,s,t.optimizePaths,t.plotAsOutline)}},function(t,e,r){"use strict";var n=r(9).Transform,i=r(1),o=r(52),a=r(54),s=r(55),u=r(57),f=r(12),l=function(t,e,r,i,a,s){n.call(this,{readableObjectMode:!0,writableObjectMode:!0}),this.format={units:t,backupUnits:e||"in",nota:r,backupNota:i||"A"},this._formatLock={units:null!=t,backupUnits:null!=e,nota:null!=r,backupNota:null!=i},this._plotAsOutline=!0===s?11e-5:s,"in"===(t||this.format.backupUnits)&&(this._plotAsOutline=this._plotAsOutline/25.4),this._optimizePaths=a||s,this._line=0,this._done=!1,this._tool=null,this._outTool=null,this._tools={},this._macros={},this._pos=[0,0],this._box=f.new(),this._mode=null,this._arc=null,this._region=!1,this._path=new o(this._optimizePaths,this._plotAsOutline),this._epsilon=null,this._lastOp=null,this._stepRep=[]};i(l,n),l.prototype._finishPath=function(t){var e=this._path.traverse();if(this._path=new o(!t&&this._optimizePaths,this._plotAsOutline),e.length){var r=this._plotAsOutline?this._outTool:this._tool;this._region||1!==r.trace.length?this.push({type:"fill",path:e}):this.push({type:"stroke",width:r.trace[0],path:e})}},l.prototype._warn=function(t){this.emit("warning",a(t,this._line))},l.prototype._checkFormat=function(){this.format.units||(this.format.units=this.format.backupUnits,this._warn("units not set; using backup units: "+this.format.units)),this.format.nota||(this.format.nota=this.format.backupNota,this._warn("notation not set; using backup notation: "+this.format.nota))},l.prototype._updateBox=function(t){var e=this._stepRep.length;if(e){var r=f.repeat(t,this._stepRep[e-1]);this._box=f.add(this._box,r)}else this._box=f.add(this._box,t)},l.prototype._transform=function(t,e,r){var n,i=t.type;if(this._line=t.line,this._done)return this._warn("ignoring extra command recieved after done command"),r();if("op"===i){this._checkFormat();var o=t.op,a=t.coord;if("I"===this.nota){var f=this;a=Object.keys(a).reduce((function(t,e){var r=a[e];return t[e]="x"===e?f._pos[0]+r:"y"===e?f._pos[1]+r:r,t}),{})}"last"===o&&(this._warn("modal operation commands are deprecated"),o=this._lastOp),"int"===o&&(null==this._mode&&(this._warn("no interpolation mode specified; assuming linear"),this._mode="i"),null!=this._arc||"cw"!==this._mode.slice(-2)||a.a||(this._warn("quadrant mode unspecified; assuming single quadrant"),this._arc="s")),this._plotAsOutline&&(this._outTool=this._tool);var l=u(o,a,this._pos,this._tool,this._mode,this._arc,this._region||this._plotAsOutline,this._path,this._epsilon,this);this._lastOp=o,this._pos=l.pos,this._updateBox(l.box)}else if("set"===i){var h=t.prop,c=t.value;"region"===h?(this._finishPath(c),this._region=c):"units"!==(n=h)&&"backupUnits"!==n&&"nota"!==n&&"backupNota"!==n||this._formatLock[h]?"tool"===h?this._region?this._warn("cannot change tool while region mode is on"):this._tools[c]?this._outTool||(this._finishPath(),this._tool=this._tools[c]):this._warn("tool "+c+" is not defined"):this["_"+h]=c:(this.format[h]=c,"units"!==h&&"nota"!==h||(this._formatLock[h]=!0))}else if("tool"===i){var p=t.code,d=t.tool;this._tools[p]&&this._warn("tool "+p+" is already defined; overwriting definition");var g=s(d,this._macros),y={code:p,trace:[],pad:g.shape,flashed:!1,box:g.box};"circle"!==d.shape&&"rect"!==d.shape||0===d.hole.length&&(y.trace=d.params),this._outTool||(this._finishPath(),this._tools[p]=y,this._tool=y)}else if("macro"===i)this._macros[t.name]=t.blocks;else if("level"===i){var b=t.level,v=t.value;if(this._finishPath(),"polarity"===b)this.push({type:"polarity",polarity:"C"===v?"clear":"dark",box:this._box.slice(0)});else{var m=[];if(v.x>1||v.y>1)for(var _=0;_<v.x;_++)for(var w=0;w<v.y;w++)m.push([_*v.i,w*v.j]);this._stepRep=m,this.push({type:"repeat",offsets:this._stepRep.slice(0),box:this._box.slice(0)})}}else"done"===i&&(this._done=!0);return r()},l.prototype._flush=function(t){this._finishPath(),this.push({type:"size",box:this._box,units:this.format.units}),t()},t.exports=l},function(t,e,r){"use strict";var n=r(53),i=function(t,e){var r,n;for(n=0;n<t.length;n++)if(e(r=t[n]))return r},o=function(t,e,r){return t.reduce((function(t,n){var i=a(e,n.position);return i<r&&i<t.distance?{point:n,distance:i}:t}),{point:void 0,distance:1/0}).point},a=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},s=function(t,e){return t[0]===e[0]&&t[1]===e[1]},u=function(t,e){this._edges=[],this._optimize=t,this._fillGaps=e,this.length=0};u.prototype.add=function(t){var e={segment:t,start:t.start,end:t.end};this._edges.push(e),this.length++},u.prototype._fillGapsAndOptimize=function(){var t=this._edges.map((function(t){return t.segment}));this._edges=[],this.length=0;for(var e=t.reduce((function(t,e){return t.concat([{position:e.start,edges:[]},{position:e.end,edges:[]}])}),[]),r=t.length,n=0;n<r;n++){var a,u,f=t[n],l=this._fillGaps,h=2*n,c=h+1,p=e.slice(0,h).concat(e.slice(c+1));if(a=o(p,f.start,l),u=o(p,f.end,l),a?l&&(f.start=a.position):a={position:f.start,edges:[]},u?l&&(f.end=u.position):u={position:f.end,edges:[]},!i(this._edges,(function(t){return e=t.segment,r=f,"line"===e.type&&(s(e.start,r.start)&&s(e.end,r.end)||s(e.start,r.end)&&s(e.end,r.start));var e,r}))){var d=this._edges.length,g={segment:f,start:a,end:u};e[h].edges.push(d),e[h].position=g.start.position,e[c].edges.push(d),e[c].position=g.end.position,this._edges.push(g),this.length++}}this._edges.forEach((function(t){e.forEach((function(e){s(e.position,t.start.position)&&(t.start.edges=t.start.edges.concat(e.edges)),s(e.position,t.end.position)&&(t.end.edges=t.end.edges.concat(e.edges))}))}))},u.prototype.traverse=function(){if(!this._optimize)return this._edges.map((function(t){return t.segment}));this._fillGapsAndOptimize();for(var t,e,r,i,o,a,u=n(Array(this._edges.length),!1),f=[],l=[],h={position:[]};l.length<this._edges.length;)for(t=u.indexOf(!1),f.push(t);f.length;)t=f.pop(),u[t]||(u[t]=!0,r=(e=this._edges[t]).end,s(h.position,r.position)?(o=e.segment,a=void 0,a={type:o.type,start:o.end,end:o.start},"arc"===o.type&&(a.center=o.center,a.radius=o.radius,a.sweep=o.sweep,a.dir="cw"===o.dir?"ccw":"cw"),i=a,h=e.start):(i=e.segment,h=e.end),h.edges.reverse().forEach((function(t){u[t]||f.push(t)})),l.push(i));return l},t.exports=u},function(t,e){var r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=/^(?:0|[1-9]\d*)$/,s=parseInt,u=Object.prototype.toString;function f(t,e,r,n){var i=t.length;for((r=p(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:p(n))<0&&(n+=i),n=r>n?0:function(t){return t?(e=p(t),r=0,n=4294967295,e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==r&&(e=e>=r?e:r)),e):0;var e,r,n}(n);r<n;)t[r++]=e;return t}function l(t,e,r){if(!h(r))return!1;var n=typeof e;return!!("number"==n?function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!function(t){var e=h(t)?u.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)}(r)&&function(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||a.test(t))&&t>-1&&t%1==0&&t<e}(e,r.length):"string"==n&&e in r)&&function(t,e){return t===e||t!=t&&e!=e}(r[e],t)}function h(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==u.call(t)}(t))return NaN;if(h(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=h(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var a=i.test(t);return a||o.test(t)?s(t.slice(2),a?2:8):n.test(t)?NaN:+t}(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function p(t){var e=c(t),r=e%1;return e==e?r?e-r:e:0}t.exports=function(t,e,r,n){var i=t?t.length:0;return i?(r&&"number"!=typeof r&&l(t,e,r)&&(r=0,n=i),f(t,e,r,n)):[]}},function(t,e,r){"use strict";t.exports=function(t,e){return{message:t,line:e}}},function(t,e,r){"use strict";var n=r(56),i=r(5),o=r(12),a=function(t){var e=Math.round(1e8*t)/1e8;return 0===e?0:e},s=function(t,e){e=e*Math.PI/180;var r=Math.sin(e),n=Math.cos(e),i=t[0],o=t[1];return[a(i*n-o*r),a(i*r+o*n)]},u=function(t,e,r,n){var i=t/2;if(e=e||0,r=r||0,n&&(e||r)){var a=s([e,r],n);e=a[0],r=a[1]}return{shape:{type:"circle",cx:e,cy:r,r:t/2},box:o.addCircle(o.new(),i,e,r)}},f=function(t,e,r,n,u,f){if(f){var l=s([t,e],f),h=s([r,n],f);t=l[0],e=l[1],r=h[0],n=h[1]}var c=(n-e)/(r-t),p=u/2,d=p,g=p;i(c)?(d*=c/Math.sqrt(1+Math.pow(c,2)),g*=1/Math.sqrt(1+Math.pow(c,2))):g=0;var y=[];y.push([a(t+d),a(e-g)]),y.push([a(r+d),a(n-g)]),y.push([a(r-d),a(n+g)]),y.push([a(t-d),a(e+g)]);var b=y.reduce((function(t,e){return o.addPoint(t,e)}),o.new());return{shape:{type:"poly",points:y},box:b}},l=function(t,e,r,n,i,o){n=n||0,i=i||0,r=r||0;var a=t/2,s=e/2;return(o=o||0)?f(n-a,i,n+a,i,e,o):{shape:{type:"rect",cx:n,cy:i,r:r,width:t,height:e},box:[-a+n,-s+i,a+n,s+i]}},h=function(t,e,r,n,i){n=n||0,i=i||0;for(var s,u,f,l=[],h=o.new(),c=t/2,p=r*Math.PI/180,d=2*Math.PI/e,g=0;g<e;g++)s=d*g+p,u=n+a(c*Math.cos(s)),f=i+a(c*Math.sin(s)),h=o.addPoint(h,[u,f]),l.push([u,f]);return{shape:{type:"poly",points:l},box:h}},c=function(t,e,r,n){return{type:"ring",cx:t,cy:e,r:r,width:n}},p=function(t,e){var r={shape:[],box:o.new()},i=1;return(e=e||[]).reduce((function(e,r){var p;switch("variable"!==r.type&&"comment"!==r.type&&(r=Object.keys(r).reduce((function(e,i){var o=r[i];return e[i]=function e(r){return Array.isArray(r)?r.map(e):n(r)?r(t):r}(o),e}),{})),null!=r.exp&&r.exp!==i&&(e.shape.push({type:"layer",polarity:1===r.exp?"dark":"clear",box:e.box.slice(0)}),i=r.exp),r.type){case"circle":p=u(r.dia,r.cx,r.cy,r.rot);break;case"vect":p=f(r.x1,r.y1,r.x2,r.y2,r.width,r.rot);break;case"rect":p=l(r.width,r.height,0,r.cx,r.cy,r.rot);break;case"rectLL":var d=r.height/2,g=r.width/2,y=r.x+g,b=r.y+d;p=l(r.width,r.height,0,y,b,r.rot);break;case"outline":p=function(t,e){for(var r,n=[],i=o.new(),a=0;a<t.length-2;a+=2)r=[t[a],t[a+1]],e&&(r=s(r,e)),n.push(r),i=o.addPoint(i,r);return{shape:{type:"poly",points:n},box:i}}(r.points,r.rot);break;case"poly":p=h(r.dia,r.vertices,r.rot,r.cx,r.cy);break;case"moire":p=function(t,e,r,n,i,s,f,h,p){for(var d=t/2,g=[],y=o.addCircle(o.new(),d,f,h),b=e/2,v=r+b;d>e&&g.length<n;)d-=b,g.push(c(f,h,a(d),e)),d-=v;d>0&&g.length<n&&g.push(u(a(2*d),f,h).shape);var m=l(s,i,0,f,h,p),_=l(i,s,0,f,h,p);return g.push(m.shape),g.push(_.shape),y=o.add(y,m.box),{shape:g,box:y=o.add(y,_.box)}}(r.dia,r.ringThx,r.ringGap,r.maxRings,r.crossThx,r.crossLen,r.cx,r.cy,r.rot);break;case"thermal":p=function(t,e,r,n,i,s){var u=a((r-i)/2),f=a((r+i)/4),h=a((r-n)/2),p=a((r-h)/2),d=o.addCircle(o.new(),r/2,t,e);return{shape:{type:"clip",shape:[l(u,u,0,t+f,e+f,s).shape,l(u,u,0,t-f,e+f,s).shape,l(u,u,0,t-f,e-f,s).shape,l(u,u,0,t+f,e-f,s).shape],clip:c(t,e,p,h)},box:d}}(r.cx,r.cy,r.outerDia,r.innerDia,r.gap,r.rot);break;case"variable":return t=r.set(t),e;default:return e}return e.shape=e.shape.concat(p.shape),1===i&&(e.box=o.add(e.box,p.box)),e}),r)};t.exports=function(t,e){var r,n,i=[],a=o.new(),s=t.shape,f=t.params;if("circle"===s)n=u(f[0]);else if("rect"===s)n=l(f[0],f[1]);else if("obround"===s)n=l(f[0],f[1],Math.min(f[0],f[1])/2);else{if("poly"!==s){var c=f.reduce((function(t,e,r){return t["$"+(r+1)]=e,t}),{});return p(c,e[s])}n=h(f[0],f[1],f[2])}return i.push(n.shape),a=o.add(a,n.box),t.hole.length&&(r=1===t.hole.length?u(t.hole[0]).shape:l(t.hole[0],t.hole[1]).shape,i.push({type:"layer",polarity:"clear",box:a},r)),{shape:i,box:a}}},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e,n="object"==typeof self&&self&&self.Object===Object&&self,i=r||n||Function("return this")(),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i.Symbol,f=u?u.toStringTag:void 0;function l(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":f&&f in Object(t)?function(t){var e=a.call(t,f),r=t[f];try{t[f]=void 0;var n=!0}catch(t){}var i=s.call(t);n&&(e?t[f]=r:delete t[f]);return i}(t):function(t){return s.call(t)}(t)}t.exports=function(t){if(!function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}(t))return!1;var e=l(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}}).call(this,r(0))},function(t,e,r){"use strict";var n=r(12),i=Math.PI/2,o=Math.PI,a=2*Math.PI,s=3*Math.PI/2,u=function(t,e){return t>=e?t:0},f=function(t,e,r,o,f,l,h,c,p,d){var g,y=r[2]||Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)),b=[],v=[],m=[];r[0]&&"s"===l?v.push(t[0]+r[0],t[0]-r[0]):v.push(t[0]+r[0]),r[1]&&"s"===l?m.push(t[1]+r[1],t[1]-r[1]):m.push(t[1]+r[1]);for(var _=0;_<v.length;_++)for(var w=0;w<m.length;w++)b.push([v[_],m[w]]);r[2]?(l="m",g=function(t,e,r,n,i){var o="ccw"===r?1:-1,a=(t[0]+e[0])/2,s=(t[1]+e[1])/2,f=e[0]-t[1],l=e[1]-t[1],h=Math.sqrt(Math.pow(f,2)+Math.pow(l,2)),c=h/2,p=Math.sqrt(Math.pow(i,2)-Math.pow(c,2)),d=o*f*p/h;return[[u(a+-o*l*p/h,n),u(s+d,n)]]}(t,e,f,c,r[2])):g="s"===l?b.filter((function(r){var n=Math.sqrt(Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2)),i=Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2));return Math.abs(n-y)<=c&&Math.abs(i-y)<=c})):b;var x=function(t,e,r,n,o){for(var s,u,f,l,h;null==h&&o.length>0;)l=o.pop(),s=Math.atan2(t[1]-l[1],t[0]-l[0]),u=Math.atan2(e[1]-l[1],e[0]-l[0]),"cw"===r?s=s>=u?s:s+a:u=u>=s?u:u+a,f=Math.abs(s-u),"s"===n?f<=i&&(h=l):h=l;if(null!=h)return s=(s=s>=0?s:s+a)<a?s:s-a,u=(u=u>=0?u:u+a)<a?u:u-a,{center:h,sweep:f,start:t.concat(s),end:e.concat(u)}}(t,e,f,l,g);"m"===l&&t[0]===e[0]&&t[1]===e[1]&&(x.sweep=a);var E=n.new();return null!=x?(p.add({type:"arc",start:x.start,end:x.end,center:x.center,sweep:x.sweep,radius:y,dir:f}),E=function(t,e,r,o,u){var f,l,h=t.start,c=t.end,p=t.center,d=t.sweep;"cw"===u?(f=c[2],l=h[2]):(f=h[2],l=c[2]);var g=[h,c];return(f>l||d===a)&&g.push([p[0]+e,p[1]]),((f=f>=i?f-i:f+s)>(l=l>=i?l-i:l+s)||d===a)&&g.push([p[0],p[1]+e]),((f=f>=i?f-i:f+s)>(l=l>=i?l-i:l+s)||d===a)&&g.push([p[0]-e,p[1]]),((f=f>=i?f-i:f+s)>(l=l>=i?l-i:l+s)||d===a)&&g.push([p[0],p[1]-e]),g.reduce((function(t,e){if(!r){var i=n.translate(o.box,e);return n.add(t,i)}return n.addPoint(t,e)}),n.new())}(x,y,h,o,f)):d._warn("skipping impossible arc"),E},l=function(t,e,r,a,s,u,l,h,c,p){var d=l||a&&a.trace.length>0,g=l||a&&1===a.trace.length,y=a?a.code:"[NO TOOL SET]";return d?"i"===s?l||1===a.trace.length?function(t,e,r,i,o){if(o.add({type:"line",start:t,end:e}),!i){var a=n.translate(r.box,t),s=n.translate(r.box,e);return n.add(a,s)}var u=n.new();return u=n.addPoint(u,t),u=n.addPoint(u,e)}(t,e,a,l,c):function(t,e,r,a,s){var u=r.trace[0]/2,f=r.trace[1]/2,l=Math.atan2(e[1]-t[1],e[0]-t[0]),h=t[0]-u,c=t[0]+u,p=t[1]-f,d=t[1]+f,g=e[0]-u,y=e[0]+u,b=e[1]-f,v=e[1]+f,m=[];return t[0]===e[0]&&t[1]===e[1]?m.push([h,p],[c,p],[c,d],[h,d]):l>=0&&l<i?m.push([h,p],[c,p],[y,b],[y,v],[g,v],[h,d]):l>=i&&l<=o?m.push([c,p],[c,d],[y,v],[g,v],[g,b],[h,p]):l>=-o&&l<-i?m.push([c,d],[h,d],[g,v],[g,b],[y,b],[c,p]):m.push([h,d],[h,p],[g,b],[y,b],[y,v],[c,d]),m.forEach((function(t,e){var r=e<m.length-1?e+1:0;a.add({type:"line",start:t,end:m[r]})})),s._finishPath(),n.add(n.translate(r.box,t),n.translate(r.box,e))}(t,e,a,c,p):g?f(t,e,r,a,s,u,l,h,c,p):(p._warn("cannot draw arc with non-circular tool "+y+"; ignoring interpolate"),n.new()):(p._warn("tool "+y+" is not strokable; ignoring interpolate"),n.new())};t.exports=function(t,e,r,i,o,a,s,u,f,h){var c,p=[null!=e.x?e.x:r[0],null!=e.y?e.y:r[1]],d=[null!=e.i?e.i:0,null!=e.j?e.j:0,e.a];switch(t){case"flash":c=function(t,e,r,i){return r?(i._warn("flash in region ignored"),n.new()):e?(e.flashed||(e.flashed=!0,i.push({type:"shape",tool:e.code,shape:e.pad})),i.push({type:"pad",tool:e.code,x:t[0],y:t[1]}),n.translate(e.box,t)):(i._warn("flash with unknown tool ignored"),n.new())}(p,i,s,h);break;case"int":c=l(r,p,d,i,o,a,s,f,u,h);break;default:c=n.new()}return{pos:p,box:c}}},function(t,e,r){"use strict";var n=/["'&<>]/;t.exports=function(t){var e,r=""+t,i=n.exec(r);if(!i)return r;var o="",a=0,s=0;for(a=i.index;a<r.length;a++){switch(r.charCodeAt(a)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==a&&(o+=r.substring(s,a)),s=a+1,o+=e}return s!==a?o+r.substring(s,a):o}},function(t,e,r){"use strict";var n=r(9).Transform,i=r(1),o=r(5),a=r(60),s=r(61),u=r(62),f=r(7),l=r(24),h=f.shift,c=f.maskLayer,p=f.createMask,d=function(t,e,r,i){n.call(this,{writableObjectMode:!0,readableObjectMode:i}),this.id=t,this.attributes=e,this.defs=[],this.layer=[],this.viewBox=[0,0,0,0],this.width=0,this.height=0,this.units="",this._maskId="",this._maskBox=[],this._mask=[],this._blockMode=!1,this._blockBox=[],this._block=[],this._blockCount=0,this._blockLayerCount=0,this._offsets=[],this._clearCount=0,this._lastLayer=0,this._blockCount=0,this._blockCount=0,this._old_polarity="dark",this._element=r};i(d,n),d.prototype._transform=function(t,e,r){switch(t.type){case"shape":this.defs=this.defs.concat(a(this.id,t.tool,t.shape,this._element));break;case"pad":this._draw(s(this.id,t.tool,t.x,t.y,this._element));break;case"fill":this._draw(u(t.path,null,this._element));break;case"stroke":this._draw(u(t.path,t.width,this._element));break;case"polarity":this._handleNewPolarity(t.polarity,t.box);break;case"repeat":this._handleNewRepeat(t.offsets,t.box);break;case"size":this._handleSize(t.box,t.units)}r()},d.prototype._flush=function(t){this._handleNewRepeat([]),this.push(l(this,this.attributes,this._element)),t()},d.prototype._finishBlockLayer=function(){if(this._block.length){this._blockLayerCount++;var t=this.id+"_block-"+this._blockCount+"-"+this._blockLayerCount;this.defs.push(this._element("g",{id:t},this._block)),this._block=[]}},d.prototype._finishClearLayer=function(){return!!this._maskId&&(this.defs.push(p(this._maskId,this._maskBox,this._mask,this._element)),this._maskId="",this._maskBox=[],this._mask=[],!0)},d.prototype._handleNewPolarity=function(t,e){if(this._blockMode)return 0!==this._blockLayerCount||this._block.length||(this._blockMode="dark"===t?1:2),this._finishBlockLayer();if("dark"===this._old_polarity&&"clear"===t){this._clearCount=this._clearCount+1;var r=this.id+"_clear-"+this._clearCount;this._old_polarity="clear",this.layer=[c(r,this.layer,this._element)],this._maskId=r,this._maskBox=e.slice(0)}else"clear"===this._old_polarity&&"dark"===t&&(this._old_polarity="dark",this._finishClearLayer(e))},d.prototype._handleNewRepeat=function(t,e){var r=0===t.length,n=this._finishClearLayer();this._finishBlockLayer();var i=this.layer,a=this._element,s=this._blockMode,u=this._blockLayerCount,f=this.id+"_block-"+this._blockCount+"-";if(this._offsets.forEach((function(t){for(var e=s;e<=u;e+=2)i.push(a("use",{"xlink:href":"#"+f+e,x:h(t[0]),y:h(t[1])}))})),u>2-s){var l=f+"clear";this.layer=[c(l,i,this._element)],this._maskId=l,this._maskBox=this._blockBox.slice(0),this._mask=this._offsets.reduce((function(t,e){for(var r,n=1;n<=u;n++){r=1===s?n%2==1:n%2==0;var i={"xlink:href":"#"+f+n,x:h(e[0]),y:h(e[1])};r&&(i.fill="#fff",i.stroke="#fff"),t.push(a("use",i))}return t}),[]),n=this._finishClearLayer()}this._offsets=t,r?this._blockMode=0:(this._blockMode=n?2:1,this._blockCount++,this._blockLayerCount=0,this._blockBox=e.every(o)?e:[0,0,0,0])},d.prototype._handleSize=function(t,e){if(t.every(o)){var r=h(t[0]),n=h(t[1]),i=h(t[2]-t[0]),a=h(t[3]-t[1]);this.viewBox=[r,n,i,a],this.width=i/1e3,this.height=a/1e3,this.units=e}},d.prototype._draw=function(t){this._blockMode?this._block.push(t):this._maskId?this._mask.push(t):this.layer.push(t)},t.exports=d},function(t,e,r){"use strict";var n=r(7),i=n.shift,o=n.createMask,a=n.maskLayer,s=function(t,e,r){return{tag:t,attr:e,children:r||[]}},u=function(t,e,r,n){var o={cx:i(t),cy:i(e),r:i(r)};return null!=n&&(o["stroke-width"]=i(n),o.fill="none"),s("circle",o)},f=function(t,e,r,n,o){var a={x:i(t-n/2),y:i(e-o/2),width:i(n),height:i(o)};return r&&(a.rx=i(r),a.ry=i(r)),s("rect",a)},l=function(t){var e=t.map((function(t){return t.map(i).join(",")})).join(" ");return s("polygon",{points:e})};t.exports=function(t,e,r,n){var i=t+"_pad-"+e,h=i+"_",c=r.reduce((function(t,e,c){var p;switch(e.type){case"circle":p=u(e.cx,e.cy,e.r);break;case"ring":p=u(e.cx,e.cy,e.r,e.width);break;case"rect":p=f(e.cx,e.cy,e.r,e.width,e.height);break;case"poly":p=l(e.points);break;case"clip":var d=function(t,e,r,n,i){var o=t+"mask-"+e,a="url(#"+o+")",h=u(n.cx,n.cy,n.r,n.width),c=i("mask",{id:o,stroke:"#fff"},[i(h.tag,h.attr)]),p=r.map((function(t){var e="rect"===t.type?f(t.cx,t.cy,t.r,t.width,t.height):l(t.points);return i(e.tag,e.attr)}));return{mask:c,layer:s("g",{mask:a},p)}}(h,c,e.shape,e.clip,n);t.masks.push(d.mask),p=d.layer;break;case"layer":if(t.count++,t.last=e.polarity,"clear"===e.polarity){var g=h+t.count;t.maskId=g,t.maskBox=e.box.slice(0),t.maskChildren=[],t.layers=[a(g,t.layers,n)]}else{var y=o(t.maskId,t.maskBox,t.maskChildren,n);t.masks.push(y)}}if(p){1===r.length&&(p.attr.id=i);var b=n(p.tag,p.attr,p.children);"dark"===t.last?t.layers.push(b):t.maskChildren.push(b)}return t}),{count:0,last:"dark",layers:[],maskId:"",maskBox:[],maskChildren:[],masks:[]});return"clear"===c.last&&c.masks.push(o(c.maskId,c.maskBox,c.maskChildren,n)),r.length>1&&(c.layers=n("g",{id:i},c.layers)),c.masks.concat(c.layers)}},function(t,e,r){"use strict";var n=r(7).shift;t.exports=function(t,e,r,i,o){return o("use",{"xlink:href":"#"+t+"_pad-"+e,x:n(r),y:n(i)})}},function(t,e,r){"use strict";var n=r(7).shift,i=function(t,e){return("L"===t||"M"===t?"":"L ")+n(e[0])+" "+n(e[1])},o=function(t,e,r,a,s,u){if(0===r)return i(t,s);if(r===2*Math.PI){var f=[2*u[0]-s[0],2*u[1]-s[1]];return o(t,e,Math.PI,a,f,u)+" "+o("A",e,Math.PI,a,s,u)}var l="A"===t?"":"A ";return l+=(e=n(e))+" "+e+" 0 ",l+=r>Math.PI?"1 ":"0 ",l+="ccw"===a?"1 ":"0 ",l+=n(s[0])+" "+n(s[1])},a=function(t,e){var r,a,s=e.type,u=e.start,f=e.end;return r=t.last,a=u,(r[0]!==a[0]||r[1]!==a[1])&&(t.data+=(t.data?" ":"")+function(t){return"M "+n(t[0])+" "+n(t[1])}(u),t.lastCmd="M"),t.data+=" ","line"===s?(t.data+=i(t.lastCmd,f),t.lastCmd="L"):(t.data+=o(t.lastCmd,e.radius,e.sweep,e.dir,f,e.center),t.lastCmd="A"),t.last=f,t};t.exports=function(t,e,r){var i={d:t.reduce(a,{last:[],data:""}).data};return null!=e&&(i.fill="none",i["stroke-width"]=n(e)),r("path",i)}},function(t,e,r){"use strict";var n=["id","attributes","defs","layer","viewBox","width","height","units"];t.exports=function(t){return n.reduce((function(e,r){return null!=t[r]&&(e[r]=t[r]),e}),{})}}]);
//# sourceMappingURL=gerber-to-svg.min.js.map